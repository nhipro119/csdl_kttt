
Không rõ
Cấu hình Máy chủ Mail nâng cao (Windows 2003 Server)
Bài báo trình bày những tùy chọn cấu hình máy chủ Mail (mail server) nâng cao trong các HĐH họ Windows Server 2003. Các tùy chọn này bao gồm việc cấu hình nhiều máy chủ mail để sử dụng một nơi lưu giữ mail đơn hay một nơi lưu giữ mail từ xa, cấu hình e-mail bí danh và thay đổi thông điệp lời chào.Giới thiệu Trên một mail-server Windows Server 2003, bạn có thể cấu hình một số các tùy chọn nâng cao. Các tùy chọn này bao gồm việc cấu hình nhiều mail-server để sử dụng một nơi lưu giữ mail đơn hay một nơi lưu giữ mail từ xa, cấu hình e-mail bí danh (aliasing) và tùy biến thông báo lời chào (greeting message). Bài báo cung cấp những hướng dẫn cụ thể để bạn có thể cấu hình các tùy chọn nâng cao này như thế nào. Chúng tôi khuyến cáo rằng bạn nên xem lại phần trợ giúp ‘E-mail Services Help’ trước khi đọc bài báo này. Để truy nhập vào vào ‘E-mail Services Help  (trợ giúp các dịch vụ E-mail), nhấn Start, nhấn Help and Support, nhấn Internet and E-mail Services và cuối cùng nhấn E-mail services. Kịch bản 1: Cấu hình nhiều mail-server để sử dụng một nơi lưu giữ mail đơn hay một nơi lưu giữ mail từ xaTrong một cấu hình mail-server chuẩn, mỗi mail-server có một nơi lưu giữ mail cục bộ tương ứng. Mặc dù vậy, bạn có thể cấu hình nhiều mail-server để sử dụng một nơi lưu giữ mail đơn hay một nơi lưu giữ mail từ xa. Lợi thế của việc sử dụng nhiều mail-server là ở chỗ thêm sự dư thừa vào việc triển khai của bạn và cho phép mạng của bạn xử lý được nhiều lưu lượng hơn. Lợi thế của việc sử dụng một nơi lưu giữ từ xa là bạn có thể sau đó sử dụng một thiết bị lưu giữ file chuyên dụng như một thiết bị NAS (network-attached storage).Quan trọng: Để thực hiện thủ tục tiếp sau, bạn phải đang sử dụng một Active Directory integrated authentication (chứng thực tích hợp Active Directory) hoặc encrypted password file authentication (chứng thực file mật khẩu được mã hóa). Mail-server phải ở trong cùng một domain Active Directory như máy tính mà trên đó nơi lưu giữ mail được cấu hình.Để cấu hình nhiều mail-server có thể sử dụng một nơi lưu giữ mail đơn hay nơi lưu giữ mail từ xa:+ Theo chỉ dẫn trợ giúp của Windows Server 2003 để cài đặt các dịch vụ E-mail trên mỗi máy tính mà bạn muốn sử dụng như là một mail-server. Những chỉ dẫn này được cung cấp trong mục trợ giúp “To install e-mail services”. Để xem mục này, nhấn Start, và sau đó nhấn Help and Support. Nhấn Internet and E-mail Services, nhấn E-mail services và sau đó nhấn POP3 service. Nhấn How To, Set Up the POP3 Service và sau đó nhấn Install e-mail services. + Trên mỗi mail-server, chọn ‘Active Directory integrated authentication’ hoặc ‘encrypted password file authentication’. Các chỉ dẫn cho thủ tục này được cung cấp trong mục trợ giúp “Set the authentication method”. Để xem mục này, nhấn Start sau đó nhấn Help and Support. Nhấn Internet and E-mail Services, nhấn E-mail services và sau đó nhấn POP3 service. Nhấn How To, nhấn Set Up the POP3 Service và sau đó nhấn Set the authentication method. + Làm bất cứ các thay đổi bổ sung nào cho cấu hình của các mail-server riêng lẻ như thiết lập mức đăng ký (logging level) hay cổng (port), hay cấu hình SPA (secure password authentication).+ Làm theo những chỉ dẫn trong trợ giúp của Windows Server 2003 để cấu hình một thư mục hay ổ đĩa như một folder dùng chung để làm nơi lưu giữ mail. Những chỉ dẫn này được cung cấp trong mục trợ giúp &quot;Share a folder or drive&quot;. Để xem mục này, nhấn Start và sau đó nhấn Help and Support. Nhấn Disks and Data, nhấn Managing Files and Folders, Shared Folders, How To, Share a folder or drive.+ Phụ thuộc vào việc bạn đang sử dụng ‘encrypted password file authentication’ (chứng thực tệp tin mật khẩu được mã hóa) hay ‘Active Directory integrated authentication’ (chứng thực được tích hợp Active Directory), làm một trong các bước sau:* Nếu bạn đang sử dụng ‘encrypted password file authentication’, bạn phải dùng cùng GUID (globally unique identifier) trên mỗi mail-server. Để làm như vậy, chọn một mail-server, nhận diện GUID của nó và sau đó cấu hình tất cả các mail-server khác để sử dụng chung GUID này. GUID được định vị tại: HKEY_LOCAL_MACHINE\SOFTWARE\microsoft\pop3service\auth\authguid. GUID được hiển thị trong cột Data. Hoặc nếu bạn nhấn đúp vào khóa (key) authguid, GUID hiển thị trong cột Value data.Để thay đổi GUID:- Nhấn Start, nhấn Run và sau đó gõ: regedit- Vào HKEY_LOCAL_MACHINE\SOFTWARE\microsoft\pop3service\auth\ authguid- Nhấn đúp và khóa authguid và sau đó, trong Value data gõ : GUID- Sau việc sửa đổi đang ký (registry), bạn phải khởi động lại dịch vụ POP3. Nhấn Start, nhấn Run, gõ cmd và sau đó nhấn OK. - Tại dấu nhắc dòng lệnh, gõ: net stop pop3svc - Sau khi dịch vụ đã dừng, tại dấu nhắc dòng lệnh, gõ : net start pop3svc * Nếu bạn đang sử dụng ‘Active Directory integrated authentication’, bạn phải chờ replication (bản sao) của ‘Active Directory’ xuất hiện, như vậy tất cả các mail-server có thể truy nhập vào nơi lưu giữ mail mới. Thời gian replication thay đổi, phụ thuộc vào số lượng các ‘domain controller’ trong việc triển khai của bạn. Thông tin chi tiết về ‘Active Directory replication’, xem trong mục trợ giúp của Windows Server 2003 “Replication overview”. Để xem mục này, nhấn Start và sau đó nhấn Help and Support. Nhấn Active Directory, nhấn Concepts, nhấn Understanding Active Directory, nhấn Understanding Sites and Replication và sau đó nhấn Replication overview.+ Làm theo những chỉ dẫn trợ giúp trong Windows Server 2003 để cấu hình mỗi mail-server một nơi lưu giữ mail và sử dụng nơi lưu giữ mới mà bạn đã tạo. Nếu bạn đã tạo ra một thư mục chia xẻ từ xa như mail root, đường dẫn sẽ là như sau: \\path\share. Để xem mục trợ giúp cho thủ tục này, nhấn Start và sau đó nhấn Help and Support, Internet and E-mail Services, E-mail services, POP3 service, How To, Set Up the POP3 Service, Set the mail store.+ Sau khi thiết lập nơi lưu giữ mail, bạn phải khởi động lại dịch vụ POP3. Nhấn Start, Run, gõ cmd và sau đó nhấn OK.+ Tại dấu nhắc dòng lệnh, gõ: net stop pop3svc+ Sau khi dịch vụ dừng, tại dấu nhắc dòng lệnh, gõ: net start pop3svc Để đặt bảo mật (security) và và sự cho phép (permissions) cho nơi lưu giữ mail : Trên máy tính mà tại đó nơi lưu giữ mail được cấu hình, chạy Windows Explorer. [item]Nhấn chuột phải trên thư mục hay ổ đĩa chia xẻ mà bạn muốn sử dụng như một nơi lưu giữ mail và sau đó nhấn Sharing and Security. Kiểm tra lại xem Share this folder đã được chọn. [item]Trên tab Sharing, nhấn Permissions, nhấn Everyone và sau đó nhấn Remove. [item]Nhấn Add, nhấn Object Types, chọn Computers và sau đó nhấn OK. [item]Trong Select Users, Computers, or Groups gõ: Domain Admins; Network Service; System; và các tên của tất cả mail-server trong sự triển khai của bạn, mỗi tên cách nhau bởi một dấu chấm phẩy (;) và sau đó nhấn OK. [item]Nhấn Domain Admins và sau đó nhấn Full Control. [item]Lặp lại bước trước đó cho Network Service, System và mỗi tài khoản mail-server và sau đó nhấn OK. [item]Trên tab Security, thực hiện lại các bước từ 4-7. [item]Trên tab Security, nhấn Advanced. [item]Kiểm tra lại tùy chọn Allow inheritable permissions from the parent to propagate to this object and all child objects. Include these with entries explicitly defined here được chọn. [item]Chọn Replace permission entries on all child objects with entries shown here that apply to child objects, OK, Yes khi có dấu nhắc và sau đó nhấn OK. [item]Tạo các domain e-mail và các mailbox. Để xem mục trợ giúp của các thủ tục này, nhấn Start và sau đó nhấn Help and Support, Internet and E-mail Services, E-mail services, POP3 service, How To và thực hiện một trong các bước sau :* Để xem mục trợ giúp tạo ra các domain e-mail, nhấn Manage Domains và sau đó nhấn Create a domain.* Để xem mục trợ giúp tạo ra các mailbox, nhấn Manage Mailboxes và sau đó nhấn Create a mailbox. Chú ý : Soạn thảo không đúng registry có thể làm hỏng hệ thống của bạn. Trước khi thay đổi registry, bạn nên sao lưu lại bất kỳ dữ liệu có giá trị nào trên máy tính. Quan trọng: Nếu bạn thay đổi bất cứ các thuộc tính server dịch vụ POP3 như cổng (port) hay mức đăng ký (logging level), từ bất cứ các mail-server nào trong sự triển khai của bạn, các DACL (discretionary access control list) trong nơi lưu giữ sẽ được đặt các giá trị mặc định. Bạn phải reset các DACL trong nơi lưu giữ mail như được mô tả trước đó, trong thủ tục “To set mail store security and permissions.” Chú ý : - Nếu bạn có nhiều hơn một mail-server trong sự triển khai của bạn, bạn phải thực hiện lại thủ tục thích hợp để tạo ra một domain e-mail trên mỗi mail-server đòi hỏi truy nhập vào domain e-mail này. Nếu bạn đang xoá một domain e-mail, bạn phải thực hiện lại thủ tục thích hợp trên mỗi máy tính trong sự triển khai của bạn. Thông tin thêm để tạo ra và xoá các domain, xem các mục trợ giúp tương ứng trong “Manage Domains”. Để xem trợ giúp, nhấn Start và sau đó nhấn Help and Support, Internet and E-mail Services, E-mail services, POP3 service, How To, Manage Domains. - Bạn phải chờ Active Directory replication xuất hiện trước khi các tài khoản người dùng dịch vụ POP3 đã có sẵn trong Active Directory. Mặc dù bạn có thể tạo ra các mailbox từ bất cứ các server nào, replication phải được xuất hiện giữa các domain-controller trước khi các phần kích thước mailbox có thể hoạt động hay các tài khoản người dùng POP3 có thể đăng nhậP (log on) vào domain Active Directory. - Khi bạn cho phép các quota (phần tham gia của ổ đĩa). Các quota có hiệu lực chỉ trên máy tính được cấu hình với nơi lưu giữ mail. Nếu bạn có một tập các quota-limit trên các mail-server khác trong Active Directory domain, bạn phải tạo chúng lại trong nơi lưu giữ mail. - Nếu bạn đang sử dụng ‘encrypted password file authentication’ (chúng thực tệp tin mật khẩu được mã hoá), các quota sẽ có hiệu lực để chống lại các tài khoản máy tính cho phép ghi (write) vào nơi lưu giữ mail. Quá trình đó tiếp tục cho đến khi bạn cấu hình một quota cho mỗi tài khoản mailbox. Thông tin chi tiết hơn về tạo các quota cho các tài khoản e-mail, xem mục trợ giúp trong Windows Server 2003 “Configuring disk quotas for the POP3 service”. Để xem mục này, nhấn Start và sau đó nhấn Help and Support. Nhấn Internet and E-mail Services, E-mail services, POP3 service, Concepts, Using the POP3 service, Configuring disk quotas for the POP3 service. - Bạn không thể sửa đổi một quota cho đến khi tài khoản liên quan đã ghi lần đầu tiên vào nơi lưu giữ mail - Khi bạn tạo một domain e-mail mới, mail-server đầu tiên mà trên đó bạn thực hiện thủ tục này bổ sung thêm domain e-mail mới vào máy chủ SMTP (Simple Mail Transfer Protocol) cục bộ và tạo ra thư mục lưu giữ mail cho domain e-mail. Bạn phải lặp lại quá trình này cho các máy chủ mail khác trong sự triển khai của bạn để truy cập vào domain e-mail mới. Mặc dù vậy, chỉ có domain SMTP sẽ được bổ sung vào máy chủ mà trên đó bạn đang thực hiện thủ tục này. Nguyên nhân là do thư mục lưu giữ mail cho domain e-mail đang tồn tại. - Khi bạn xoá một domain e-mail, máy chủ mail đầu tiên trên đó bạn đang đang thực hiện thao tác này gỡ bỏ domain SMTP cục bộ của nó và thư mục lưu giữ mail của domain e-mail. Bạn phải gỡ bỏ entry của domain SMTP từ tất cả của các máy chủ mail khác trong sự triển khai của bạn. Để làm điều đó, hãy lặp lại quá trình này qua việc thực hiện thao tác xoá tại dấu nhắc dòng lệnh của mỗi máy chủ mail trong sự triển khai của bạn. Để thực hiện thao tác này tại dấu nhắc dòng lệnh gõ : winpop delete domain - Một số tuỳ chọn phải được cấu hình trên mỗi máy chủ mail trong sự triển khai của bạn. Các tuỳ chọn này bao gồm: thiết lập nơi lưu giữ mail, thiết lập mức đăng nhập (logging level), thiết lập SPA (Secure Password Authentication) và thiết lập phương pháp chứng thực. Các thao tác khác như tạo và xoá các mailbox có thể được thực hiện trên bất cứ mail-server nào trong sự triển khai của bạn do các thao tác này tác động tới toàn bộ domain e-mail. - Thông tin thêm về thiết lập các permission (sự cho phép) trên một tài nguyên dùng chung, xem mục trợ giúp trong Windows Server 2003 có tên &quot;Set permissions on a shared resource”. Để xem mục này, nhấn Start và sau đó nhấn Help and Support, Disks and Data, Managing Files and Folders, Shared Folders, How To, Set permissions on a shared resource. - Thông tin chi tiết về thiết lập ‘permissions’ trên một ‘folder’ xem mục trợ giúp trong Windows Server 2003 có tên &quot;To set, view, change, or remove permissions on files and folders”. Để xem mục này, nhấn Start và sau đó nhấn Help and Support, Security, Access Control, How To, Set, View, Change, or Remove Permissions on an Object, Set, view, change, or remove permissions on files and folders. Kịch bản 2: Cấu hình E-Mail Aliasing Bạn có thể sử dụng ‘aliasing’ để cấu hình một địa chỉ e-mail và như vậy tất cả e-mail được gửi đến nó được định tuyến đến một địa chỉ e-mail khác. Chẳng hạn, tất cả e-mail được gửi đến postmaster@example.com sẽ được định tuyến đến địa chỉ e-mail someone@example.com. Với ‘aliasing’, bạn có thể bảo toàn các địa chỉ e-mail khác nhau cho sự sử dụng công cộng và cá nhân, các tài khoản người dùng mạng vô danh (obscure), định tuyến e-mail qua nhiều domain e-mail và tạo các địa chỉ e-mail đơn giản và phù hợp để tương tác với khách hàng. Điều đó làm giảm sự lộ liễu của của các địa chỉ e-mail trong (internal). Việc làm giảm sự lộ liễu này có thể trở thành mối lợi về an ninh. ‘Aliasing’ hoạt động bởi việc tạo ra một liên kết &quot;cứng&quot; (hard) giữa folder của mailbox tài khoản e-mail bí danh (alias) và một hay nhiều folder mailbox tài khoản e-mail khác. Một liên kết &quot;cứng&quot; tạo ra một tên mới và khác cho tệp tin tồn tại và đường dẫn thư mục. Nó không tạo ra một bản sao lưu của tệp tin hoặc thư mục hoặc thay đổi nội dung của tệp tin hay thư mục. Để tạo ra một bí danh (alias), bạn tạo một liên kết &quot;cứng&quot; giữa tài khoản e-mail bí danh và tài khoản e-mail mà bạn muốn định tuyến các e-mail tới đó và cũng được biết như là một tài khoản e-mail đích (target e-mail account). Việc tạo một liên kết &quot;cứng&quot; (hard link) làm thay đổi thư mục lưu giữ mail của tài khoản e-mail bí danh đến đường dẫn của thư mục lưu giữ mail của tài khoản e-mail đích. Kết quả là, bất kỳ e-mail nào được gửi tới tài khoản e-mail bí danh đều được định tuyến đến tài khoản e-mail đích. Để thực hiện “aliasing”, bạn phải sử dụng công cụ linkd.exe có sẵn trong Windows 2000 Resource Kit và Windows Server 2003 Resource Kit. Sau khi bạn tải xuống công cụ này, bạn phải tạo ra một thư mục mới trong nơi lưu giữ mail của tải khoản bí danh. Bạn sử dụng công cụ linkd.exe để tạo ra một liên kết &quot;cứng&quot; giữa thư mục lưu giữ mail của tài khoản bí danh và tài khoản đích. Ở đây không tồn tại tài khoản người dùng liên quan với tài khoản e-mail bí danh. Nếu bạn đang sử dụng chứng thực tích hợp Active Directory hay chứng thực các tài khoản Windows cục bộ, bạn không thể lấy ra e-mail khi sử dụng các uỷ quyền bí danh. Nếu bạn đang sử dụng chứng thực tệp tin mật khẩu được mã hoá, mặc dù vậy, bạn có thể lấy ra e-mail khi sử dụng tên tài khoản e-mail bí danh hoặc tên tài khoản đích. Lý do ở đây là mật khẩu được dùng chung cho cả hai mailbox. Để tạo một e-mail bí danh, bạn thực hiện theo các bước sau: + Nhấn Start, nhấn Run và sau đó gõ: cmd+ Tại dấu nhắc dòng lênh, gõ: mkdir mailroot\domain\p3_aliasAccount.mbx+ Vào thư mục có chứa tệp tin linkd.exe. + Tại dấu nhắc dòng lệnh, gõ: linkd mailroot\domain\p3_aliasAccount.mbxmailroot\domain\p3_target Account.mbx Quan trọng : Tên thư mục mà bạn tạo cho tài khoản bí danh không được xung đột với các tên thư mục đang tồn tại. Nó phải tuân theo một số quy tắc đặt tên cho mailbox được chỉ ra trong bảng dưới đây.Phương pháp chứng thựcCác ký tự ngăn cấm Active Directory integrated authentication@ ( ) / \ [ ] : ; , &quot; &amp;lt; &amp;gt; * = | ? +Local Windows accounts authentication@ ( ) / \ [ ] : ; , &quot; &amp;lt; &amp;gt; * = | ? +Encrypted password file authentication@ ( ) / \ [ ] : ; , &quot; &amp;lt; &amp;gt; * = | ? Chú ý : - E-mail mà được gửi đến cả hai tên tài khoản bí danh và tên tài khoản đích sản sinh ra nhiều bản sao lưu của cùng e-mail trong mailbox tài khoản đích. - Việc thực hiện những thao tác quản trị (như khoá hay xoá một mailbox) trên mailbox bí danh hay domain tại đó bí danh tồn tại cũng ảnh hưởng tới mailbox đích. Chẳng hạn, nếu bạn khoá mailbox bí danh, mailbox đích cũng sẽ bị khoá. - Nếu bạn muốn xoá một domain có chứa một mailbox mà một bí danh trỏ vào nó, hoặc một mailbox mà một bí danh trỏ tới, trước hết bạn phải xoá mailbox bí danh đi. Kịch bản 3: Thay đổi Greeting Message Trong khi dịch vụ POP3 chấp nhận một kết nối đến, nó trả lời bởi việc gửi thông báo sau đây: “Microsoft Windows POP3 Service Version 1.0”. Thông báo này nhận diện cấu hình máy chủ và cung cấp thông tin có thể bị lợi dụng bởi tin tặc. Bạn có thể tuỳ biến thông báo này để che đậy việc truyền của bất kỳ thông tin nào về cấu hình máy chủ. Thông điệp lời chào có giới hạn là 259 ký tự. Mặc dù vậy, việc che đậy thông tin truyền không phải là một cách hiệu quả. Nó phải được làm tăng thêm với một số thực tế an ninh bổ sung như những thứ được mô tả trong các mục trợ giúp dịch vụ POP3 có tên &quot;Best practices&quot;. Để xem mục trợ giúp này, nhấn Start và sau đó nhấn Help and Support. Nhấn Internet and E-mail Services, E-mail services, POP3 service, Best practices. Để tuỳ biến thông báo lời chào POP3, bạn phải tạo một khoá chuỗi REG_SZ trong Windows Server 2003 registry. Sau đó bạn có thể gán một giá trị chuỗi tuỳ biến vào khoá mà nó sẽ được sử dụng như một thông điệp lời chào. Để thay đổi thông điệp lời chào : Nhấn Start, nhấn Run và sau đó gõ: regedit [item]Vào HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Pop3 Service [item]Nhấn Edit menu, nhấn New và sau đó nhấn String Value. [item]Để đặt tên giá trị chuỗi mới, trong cột &quot;name&quot;, gõ Greeting. [item]Trong ô chi tiết, nhấn chuột phải vào Greeting và sau đó nhấn Modify. [item]Trong Value Data, gõ thông báo lời chào mới và sau đó nhấn OK. [item]Bạn phải dừng và sau đó khởi động lại dịch vụ POP3 cho thông báo lời chào có hiệu lực. Cảnh báo : Soạn thảo không đúng trong registry có thể là hỏng hệ thống của bạn. Trước khi thay đổi registry, bạn nên sao lưu bất cứ dữ liệu giá trị nào trên máy tính. Chú ý : Thông điệp mặc định sẽ được sử dụng nếu thông điệp lời chào tuỳ biến lớn hơn 259 ký tự hay nếu nó có chứa bất cứ các ký tự không hợp lệ nào. Các ký tự không hợp lệ bao gồm tất cả các ký tự ASCII không thể in được và các dấu ngoặc nhọn (&amp;lt; và &amp;gt;). Chúc các bạn thành công ! 							
Mục lục
Cấu hình Máy chủ Mail nâng cao (Windows 2003 Server)
Cấu hình Máy chủ Mail nâng cao (Windows 2003 Server)
Không rõChào mừng các bạn đón đọc đầu sách từ dự án sách cho thiết bị di độngNguồn: http://vnthuquan.netPhát hành: Nguyễn Kim Vỹ.Lời cuối:Cám ơn bạn đã theo dõi hết cuốn truyện.Nguồn: http://vnthuquan.netPhát hành: Nguyễn Kim Vỹ.        Nguồn: www.quantrimang.com.vnĐược bạn: mickey đưa lên        vào ngày: 5 tháng 12 năm 2004